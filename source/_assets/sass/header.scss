@keyframes stickynav {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(0%);
  }
}

@keyframes blink {
  to {
    visibility: hidden;
  }
}

// TODO: get rid of this enter and do a triangle behind it
@keyframes logoEnter {
  from {
    transform: scale3d(0, 0, 0) translate3d(-50%, 0, 0);
  }

  to {
    transform: scale3d(1, 1, 1) translate3d(-50%, 0, 0);
  }
}

@keyframes logoTriangle {
  to {
    stroke-dashoffset: 0;
  }
}

@include block('header') {
  position: relative;
  z-index: 999;
  width: 100%;
  font: normal 0/1 $font-bit;
  text-transform: uppercase;

  @include element('nav') {
    position: absolute;
    top:0;
    left:0;
    width: 100%;
    height: 100%;

    @include child('toggle') {
      display: none;
      position: absolute;
      top: 13px;
      right: 15px;
      z-index: 4;
      @media screen and (min-width: 767px) {
        display: none !important;
      }
    }

    @include child('list') {
      background-color: #000;
      color: #FFF;
      display: none;
      font-size: 16px;
      height: 100vh;
      left:0;
      list-style: none;
      margin:0;
      padding:0;
      position: absolute;
      top:0;
      width: 100%;
      z-index: 3;
      @include state('active') {
        align-content: center;
        align-items: center;
        display:flex;
        flex-direction: column;
        justify-content: center;
      }
    }

    @include child('item') {
      display: block;
      padding: 10px;
      a {
        color: inherit;
        text-decoration: none;
        transition: color 0.2s ease-in-out;
        &:hover {
          color: $pink;
        }
      }
      @media screen and (min-width: 760px) {
        display: inline-block;
        vertical-align: middle;
      }
    }

    @include state('sticky') {
      animation: stickynav 0.75s ease-in-out 0.25s 1 normal forwards;
      background-color: rgba(#000, 0.95);
      height: 80px;
      padding: 15px 30px;
      position: fixed;
      transform: translateY(-100%);
      @include block('logo') {
        display: inline-block;
        height: 50px;
        left:0;
        position: relative;
        top:0;
        transform: none !important;
        vertical-align: middle;
        width: 130px;
        z-index: 1;
        @include element('img') {
          height: 100%;
          width: auto;
        }
      }
      .header__nav__toggle {
        display: block;
      }
      
      .header__nav__list {
        @media screen and (min-width: 767px) {
          background-color: transparent;
          display: inline-block !important;
          height: auto;
          position: static;
          text-align: right;
          vertical-align: middle;
          width: calc(100% - 130px);
        }
      }

      .header__start {
        opacity: 0;
      }
    }
  }

  @include element('start') {
    animation: blink 1s steps(5, start) infinite;
    // bottom: 50px;
    bottom: 15%;
    color: #FFF;
    display: none;
    font-size: 24px;
    height: auto;
    left:50%;
    opacity: 1;
    padding: 10px;
    position: absolute;
    text-decoration: none;
    transform: translate(-50%);
    transition: opacity 0.5s ease-in-out;
  }

  @include modifier('splash') {
    height: 100vh;
  }

}

@include block('footer') {
  color: #FFF;
  font: normal 13px/1.5 $font-bit;
  padding: 25px 50px;
  position: relative;
  text-transform: uppercase;
  z-index: 9;
}

$logo-count: 10;
$logo-time: 0.1s;
@include block('logo') {
  left:50%;
  max-width: 100%;
  position: absolute;
  // top:50%;
  top: 16%;
  transform: scale3d(0, 0, 0) translate3d(-50%, 0, 0);
  transform-origin: 0% 100%;
  // transition: all ($logo-count * $logo-time) ease-in-out;
  width: 60%;
  will-change: transform;
  z-index: 4;
  animation-name: logoEnter;
  animation-duration: ($logo-count * $logo-time);
  animation-delay: ($logo-count * $logo-time);
  animation-fill-mode: forwards;
  animation-direction: normal;
  animation-timing-function: ease-in-out;

  @include element('img') {
    height: auto;
    left:0;
    position: relative;
    // transition: opacity $logo-time ease ($logo-count * $logo-time); 
    width: 100%;
    z-index: 5;
    // z-index: $logo-count;
    // @for $i from 1 to $logo-count+1 {
    //   @include modifier($i) {
    //     position: absolute;
    //     top: ($i * 10px);
    //     transform-origin: 50% 75%;
    //     transform: scale(0.5 / $i);
    //     transition-delay: ($logo-count - $i) * $logo-time;
    //     z-index: $logo-count - $i;
    //   }
    // }
  }

  @include element('triangle') {
    position: absolute;
    z-index: 1;
    top: 60%;
    left: 50%;
    transform: translate3d(-50%, -50%, 0);
    opacity: 0.9;
    height: 160%;
    path {
      animation-name: logoTriangle;
      animation-duration: ($logo-count * $logo-time * 1.5);
      animation-timing-function: ease-in-out;
      animation-delay: ($logo-count * $logo-time * 2.5);
      animation-fill-mode: forwards;
      stroke-dasharray: 1320;
      stroke-dashoffset: 1320;
      stroke-linecap: round;
    }
    @include modifier('glow') {
      filter: blur(10px);
      transform: translate3d(-50%, -50%, 0) scale(1.02);
    }
  }

  @include state('hidden') {
    // transform: translate3d(-50%, 50%, -100px) scale(0);
    // .logo__img {
    //   opacity: 0;
    // }
  }
}